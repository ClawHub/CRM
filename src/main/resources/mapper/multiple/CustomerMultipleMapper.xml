<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.clawhub.crm.mapper.multiple.CustomerMultipleMapper">
    <!-- 使用resultMap映射实体类和字段之间的一一对应关系 -->
    <resultMap type="com.clawhub.crm.entity.bean.CustomerBean" id="BaseResultMap">
        <result property="auditEmployeeName" column="auditEmployeeName"/>
        <association property="customer" javaType="com.clawhub.crm.entity.Customer">
            <result column="id" property="id" jdbcType="VARCHAR"/>
            <result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
            <result column="update_time" property="updateTime" jdbcType="TIMESTAMP"/>
            <result column="create_user" property="createUser" jdbcType="VARCHAR"/>
            <result column="update_user" property="updateUser" jdbcType="VARCHAR"/>
            <result column="remark" property="remark" jdbcType="VARCHAR"/>
            <result column="delete" property="delete" jdbcType="BIT"/>
            <result column="customer_id" property="customerId" jdbcType="VARCHAR"/>
            <result column="name" property="name" jdbcType="VARCHAR"/>
            <result column="phone" property="phone" jdbcType="VARCHAR"/>
            <result column="card_number" property="cardNumber" jdbcType="VARCHAR"/>
            <result column="birthday" property="birthday" jdbcType="VARCHAR"/>
            <result column="sex" property="sex" jdbcType="CHAR"/>
            <result column="mail" property="mail" jdbcType="VARCHAR"/>
            <result column="address" property="address" jdbcType="VARCHAR"/>
            <result column="profession" property="profession" jdbcType="VARCHAR"/>
        </association>
        <association property="customerAudit" javaType="com.clawhub.crm.entity.CustomerAudit">
            <result column="id" property="id" jdbcType="VARCHAR"/>
            <result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
            <result column="update_time" property="updateTime" jdbcType="TIMESTAMP"/>
            <result column="create_user" property="createUser" jdbcType="VARCHAR"/>
            <result column="update_user" property="updateUser" jdbcType="VARCHAR"/>
            <result column="remark" property="remark" jdbcType="VARCHAR"/>
            <result column="delete" property="delete" jdbcType="BIT"/>
            <result column="audit_id" property="auditId" jdbcType="VARCHAR"/>
            <result column="apply_id" property="applyId" jdbcType="VARCHAR"/>
            <result column="audit_state" property="auditState" jdbcType="VARCHAR"/>
        </association>
    </resultMap>
    <!--查看申请的客户信息-->
    <select id="query" resultType="com.clawhub.crm.entity.bean.CustomerBean">
       SELECT
            *
        FROM
            t_customer_apply t1
            LEFT JOIN t_customer t2 ON t1.customer_id = t2.customer_id
            LEFT JOIN t_customer_audit t3 ON t1.apply_id = t3.apply_id
            LEFT JOIN t_employee t4 ON t3.audit_employee_id = t4.employee_id
        WHERE
	t1.employee_id = ''
    </select>
</mapper>
